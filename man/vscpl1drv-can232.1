.\"t
.\" Automatically generated by Pandoc 2.5
.\"
.TH "VSCPL1DRV\-CAN232" "1" "January 10, 2020" "VSCP Level I CAN232 (slcan) Driver" ""
.hy
.SH NAME
.PP
vscpl1drv\-can232 \- Lawicel CAN232 (slcan) Level I Driver
.SH SYNOPSIS
.PP
vscpl1drv\-can232
.SH DESCRIPTION
.PP
This driver interface is for the can232 adapter from Lawicel (or other
slcan hardware).
This is a low cost CAN adapter that connects to one of the serial
communication ports on a computer.
The driver can handle the adapter in both polled and non polled mode,
which handled transparently to the user.
It is recommended however that the following settings are made before
real life use.
.IP \[bu] 2
Set the baud rate for the device to 115200.
You do this with the U1 command.
This is the default baud rate used by this driver.
*\ Set auto poll mode by issuing the X1 command.
.IP \[bu] 2
Enable the time stamp by issuing the Z1 command.
.SS Configuration string
.PP
The configuration string has the following format (note that all values
can be entered in either decimal or hexadecimal form (for hex precede
with 0x).
.RS
.PP
comport;baudrate;mask;filter;bus\-speed[;btr0;btr1]
.RE
.PP
If no device string is given COM1/ttyS0 will be used.
Baud rate will be set to 115200 baud and the filter/mask to fully open.
The CAN bit rate will be 125Kbps.
.SS comport
.PP
The serial communication port to use.
For windows use 1,2,3\&... for Linux use /dev/ttyS0, /dev/ttyUSB1 etc.
.SS baudrate
.PP
A valid baud rate for the \f[B]serial interface\f[R] ( for example.
9600 ).
.SS mask
.PP
The mask for the adapter.
Read the Lawicel CAN232 manual on how to set this.
It is not the same as for CANAL/VSCP.
.SS filter
.PP
The filter for the adapter.
Read the Lawicel CAN232 manual on how to set this.
It is not the same as for CANAL.
.SS bus\-speed
.PP
is the speed or the \f[B]CAN interface\f[R].
Valid values are
.PP
.TS
tab(@);
c c.
T{
Setting
T}@T{
Bus\-speed
T}
_
T{
10
T}@T{
10Kbps
T}
T{
20
T}@T{
20Kbps
T}
T{
50
T}@T{
50Kbps
T}
T{
100
T}@T{
100Kbps
T}
T{
125
T}@T{
125Kbps
T}
T{
250
T}@T{
250Kbps
T}
T{
500
T}@T{
500Kbps
T}
T{
800
T}@T{
800Kbps
T}
T{
1000
T}@T{
1Mbps
T}
.TE
.SS btr0/btr1 (Optional.)
.PP
Instead of setting a bus\-speed you can set the SJA1000 BTR0/BTR1 values
directly.
If both are set the bus_speed parameter is ignored.
.SS Flags
.PP
Not used.
Set to zero.
.SS Status return
.PP
The CanalGetStatus call returns the status structure with the
channel_status member having the following meaning:
.PP
.TS
tab(@);
l l.
T{
Bit
T}@T{
Description
T}
_
T{
Bit 0\-7
T}@T{
TX Error Counter.
T}
T{
Bit 8\-15
T}@T{
RX Error Counter.
T}
T{
Bit 16
T}@T{
Overflow.
Cleard by status read.
T}
T{
Bit 17
T}@T{
RX Warning.
T}
T{
Bit 18
T}@T{
TX Warning.
T}
T{
Bit 19
T}@T{
TX bus passive.
T}
T{
Bit 20
T}@T{
RX bus passive.
T}
T{
Bit 21
T}@T{
Reserved.
T}
T{
Bit 22
T}@T{
Reserved.
T}
T{
Bit 23
T}@T{
Reserved.
T}
T{
Bit 24
T}@T{
Reserved.
T}
T{
Bit 25
T}@T{
Reserved.
T}
T{
Bit 26
T}@T{
Reserved.
T}
T{
Bit 27
T}@T{
Reserved.
T}
T{
Bit 28
T}@T{
Reserved.
T}
T{
Bit 29
T}@T{
Bus Passive.
T}
T{
Bit 30
T}@T{
Bus Warning status.
T}
T{
Bit 31
T}@T{
Bus off status
T}
.TE
.SS Example configurations
.IP
.nf
\f[C]
5;115200;0;0;1000
\f[R]
.fi
.PP
Uses COM5 at 115200 with filters/masks open to receive all messages and
with 1Mbps CAN bit rate.
.IP
.nf
\f[C]
/dev/ttyUSB1;57600;0;0;0;0x09;0x1C
\f[R]
.fi
.PP
Uses serial USB adapter 1 at 57600 baud with filters/masks open to
receive all messages and with a CAN bit\-rate set to 50Kbps using
btr0/btr1
.SS Typical settings for VSCP daemon config
.IP
.nf
\f[C]
<driver enable=\[dq]true\[dq] >
    <name>can232</name>
    <config>/dev/ttyUSB1;57600;0;0;0;0x09;0x1C</config>
    <path>/usr/lib/vscpl1drv_can232.so</path>
    <flags>0</flags>
    <guid>00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00</guid>
</driver>
\f[R]
.fi
.PP
   *   *   *   *   *
.PP
There are many Level I drivers (CANAL drivers) available in VSCP &
Friends framework that can be used with both VSCP Works and the VSCP
Daemon (vscpd) and other tools that interface the drivers using the
CANAL standard interface.
Added to that many Level II and Level III drivers are available that can
be used with the VSCP Daemon.
.SH SEE ALSO
.PP
\f[C]vscpd\f[R] (8).
\f[C]uvscpd\f[R] (8).
\f[C]vscpworks\f[R] (1).
\f[C]vscpcmd\f[R] (1).
\f[C]vscp\-makepassword\f[R] (1).
\f[C]vscphelperlib\f[R] (1).
.PP
The VSCP project homepage is here <https://www.vscp.org>.
.SH COPYRIGHT
.PP
Copyright 2000\-2020 \[oA]ke Hedman, Grodans Paradis AB \- MIT license.
.SH AUTHORS
\[oA]ke Hedman, Grodans Paradis AB.
